<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>이벤터즈랩(eventusLAB)</title>
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsrender/1.0.12/jsrender.min.js"></script>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="/css/manage_event.css">
    <script src="/js/manage_event.js"></script>
</head>
<body>
    <div id="wrap">
        <div th:replace="~{common/side :: sidebar_manage ('schedule')}"></div>

        <!-- main -->
        <div class="content">
            <div class="container">
                <div class="page-header">
                    <div class="page-title">
                        <span>행사관리</span>
                    </div>
                    <div class="excel_download">
                        엑셀 데이터 다운로드
                    </div>
                </div>

                <div class="detail_bar">
                    <div class="detail1 this_bar" onclick="location.href='manage_event'">
                        <img src="imgs/Icon material-view-list.svg">
                        <p>행사현황</p>
                    </div>
                    <div class="detail2" onclick="location.href='manage_event_register'">
                        <img src="imgs/pen_gray.svg">
                        <p>행사등록</p>
                    </div>
                </div>

                <div class="area">
                    <div class="search_area">
                        <input type="text" class="calendar">
                        <input type="text" class="word_search">
                    </div>
                    

                    <ul class="list">
                        <ol id="top_ol">
                            <div id="index_area"><li>No</li></div>
                            <div id="title_area"><li>행사명</li></div>
                            <div id="date_area"><li>행사기간</li></div>
                            <div id="status_area"><li>진행현황</li></div>
                            <div id="count_area"><li>지원현황</li></div>
                            <div id="count_area"><li>부스현황</li></div>
                        </ol>
						<ol th:each="event : ${event_list}" id="list_ol">
							<!-- status 따라서 color 변경  -->
							<div id="index_area">
							<li th:text="${event.id}" th:if="${event.event_status == 0}" class="red"></li>
							<li th:text="${event.id}" th:if="${event.event_status == 1}" class="black"></li>
							<li th:text="${event.id}" th:if="${event.event_status == 2}" class="gray"></li>
							</div>
							
							<div id="title_area">
							<a th:href="@{eventDetail(id=${event.id})}" th:if="${event.event_status == 0}"><li th:text="${event.event_title}" class="red"></li></a>
							<a th:href="@{eventDetail(id=${event.id})}" th:if="${event.event_status == 1}"><li th:text="${event.event_title}" class="black"></li></a>
							<a th:href="@{eventDetail(id=${event.id})}" th:if="${event.event_status == 2}"><li th:text="${event.event_title}" class="gray"></li></a>
							</div>
							
							<div id="date_area">
							<li th:text="${event.event_startDate} + ' - ' + ${event.event_endDate}" th:if="${event.event_status == 0}" class="red"></li>
							<li th:text="${event.event_startDate} + ' - ' + ${event.event_endDate}" th:if="${event.event_status == 1}" class="black"></li>
							<li th:text="${event.event_startDate} + ' - ' + ${event.event_endDate}" th:if="${event.event_status == 2}" class="gray"></li>
							</div>
							
							<div id="status_area">
							<li th:if="${event.event_status == 0}" class="red">모집중</li>
							<li th:if="${event.event_status == 1}" class="black">진행중</li>
							<li th:if="${event.event_status == 2}" class="gray">진행완료</li>
							</div>
							
							<div id="a_count">

                            <!-- 지원현황 -->
							<!-- <a th:if="${event.event_status == 0}" th:href="@{application_modal(id=${event.id})}"><li th:text="${event.application_count} + ' 명'" class="red"></li></a> -->
							<a th:if="${event.event_status == 0}" th:onclick="'modal_act_application('+${event.id}+')'"><li th:text="${event.application_count} + ' 명'" class="red"></li></a>
                            <!-- 							<li th:if="${event.event_status == 0}" th:attr="onclick=|application('${event.id}')|" th:text="${event.application_count} + ' 명'" class="red"></li> -->
							
                            <!-- 근무기록 -->
                            <!-- <a th:if="${event.event_status == 1}" th:href="@{workRecord_modal(id=${event.id})}"><li th:text="${event.staff_count} + ' 명'" class="black"></li></a> -->
                            <a th:if="${event.event_status == 1}" th:onclick="'modal_act_workRecord('+${event.id}+')'"><li th:text="${event.staff_count} + ' 명'" class="black"></li></a>
							<li th:if="${event.event_status == 2}" th:text="${event.staff_count} + ' 명'" class="gray"></li>
							</div>
							
							<div id="a_count">
							<a th:href="@{manage_event_booth(id=${event.id})}" th:if="${event.event_status == 0}"><li th:text="${event.booth_count} + ' 개'" class="red"></li></a>
							<a th:href="@{manage_event_booth(id=${event.id})}" th:if="${event.event_status == 1}"><li th:text="${event.booth_count} + ' 개'" class="black"></li></a>
							<a th:href="@{manage_event_booth(id=${event.id})}" th:if="${event.event_status == 2}"><li th:text="${event.booth_count} + ' 개'" class="gray"></li></a>
							</div>
						</ol>
                    </ul>                
                    <!-- 페이징 처리(Unix 참조) -->
                    <div>
                        <ul>
                            <!-- 이전 -->

                            <!-- 번호 -->

                            <!-- 다음 -->

                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- modal -->
        <div id="modal_wrap">
            <div class="modal_bg"></div>
            <div class="modal_con_R">
                <button class="R_inact_bt" type="button" onclick="modal_inact()"></button>
                <span class="total_wrap">
                    <div class="total"></div>
                    <div class="today"></div>
                </span>
                
                <div id="modal_content_wrap">
                    <!-- 지원자 리스트 or 근무기록 리스트 -->
                </div>
            </div>
            <div class="modal_con_L">
                <div id="resume_wrap">
                    <!-- 이력서 -->
                </div>
            </div>
        </div>
    </div>

    <!-- jsrender api사용 -->
    <script id="application_list" type="text/x-jsrender">
        <div class="list_wrap app_templates" id="app_list_{{:list.id}}">
			<input type="hidden" value="{{:list.id}}" class="staff_id">
			<img src="/imgs/trash_can.svg" class="trash_icon" onclick="rejectAccept({{:list.id}},this)">
            <div class="each_">
			<div class="img_div">
				<img src="/imgs/profile_none_img.svg" class="profile_img">
			</div>
			<div class="personal_info">
				<div class="personal_div upper_div">
					<img src="/imgs/personal_icon.svg" class="icon">
					<p>{{:list.user_name}}({{:list.staff_age}}세)</p>
				</div>
				<div class="personal_div">
					<img src="/imgs/phone_icon.svg" class="icon">
					<p>{{:list.staff_phone}}</p>
				</div>
			</div>
			<div class="line"></div>
			<div class="career_info">
				<div class="upper_div"><p>행사경력</p></div>
				<div><p>{{:list.career_count}}회</p></div>
			</div>
			<div class="line"></div>
			<div class="address_info">
				<div class="upper_div"><p>거주지</p></div>
				<div><p>{{:list.staff_address}}</p></div>
			</div>
			<div class="line"></div>
			<div class="btn_div">
				<button type="button" class="accept_btn" onclick="acceptApplicant({{:list.id}},this)">수락</button>
                <span class="resume_open" onclick="resume_act()">이력서보기</span>
			</div>
			</div>
		</div>
    </script>

    <script id="worker_list" type="text/x-jsrender">
        <div class="list_wrap work_templates" id="work_list_{{:list.id}}">
			<input type="hidden" value="{{:list.id}}" id="staff_id{{:list.id}}" name="staff_id">
			<div class="each_">
			<div class="img_div">
				<img src="/imgs/profile_none_img.svg" id="profile_img">
			</div>
			<div class="personal_info">
				<div class="personal_div upper_div">
					<img src="/imgs/personal_icon.svg" class="icon">
					<p>{{:list.user_name}}({{:list.staff_age}}세)</p>
				</div>
				<div class="personal_div">
					<img src="/imgs/phone_icon.svg" class="icon">
					<p>{{:list.staff_phone}}</p>
				</div>
			</div>
			<div class="line"></div>
            {{if time != null}}
			<div class="record_wrap">
			    <input type="hidden" value="{{:time.id}}">
				<div class="record_div">
					<div class="each_record">
						<p>출근</p>
                        {{if time!=null && time.work_start_time == null }}
						<button type="button" class="record_btn start_btn" onclick="record_Time({{:list.id}},{{:time.id}},this,'/record_start')">기록</button>
                        {{else time.work_start_time != null }}
						<button type="button" class="workTime_text" >{{:time.work_start_time}}</button>
                        {{/if}}
					</div>
					<div class="each_record">
						<p>외출</p>
                        {{if time!=null && time.work_outing_time == null }}
						<button type="button" class="record_btn outing_btn" onclick="record_Time({{:list.id}},{{:time.id}},this,'/record_out')" >기록</button>
                        {{else time.work_outing_time != null }}
						<button type="button" class="workTime_text">{{:time.work_outing_time}}</button>
                        {{/if}}
					</div>
					<div class="each_record">
						<p>복귀</p>
                        {{if time!=null && time.work_comeback_time == null }}
						<button type="button" class="record_btn comeback_btn" onclick="record_Time({{:list.id}},{{:time.id}},this,'/record_back')" >기록</button>
                        {{else time.work_comeback_time != null }}
						<button type="button" class="workTime_text" >{{:time.work_comeback_time}}</button>
                        {{/if}}
					</div>
					<div class="each_record">
						<p>퇴근</p>
                        {{if time!=null && time.work_end_time == null }}
						<button type="button" class="record_btn end_btn" onclick="record_Time({{:list.id}},{{:time.id}},this,'/record_end')" >기록</button>
                        {{else time.work_end_time != null }}
						<button type="button" class="workTime_text">{{:time.work_end_time}}</button>
                        {{/if}}
					</div>
				</div>
			</div>
            {{else time == null}}
			<div class="record_wrap">
				<div class="record_div">
					<div class="each_record">
						<p>출근</p>
						<button type="button" class="record_btn start_btn" onclick="no_record_Time({{:list.id}},this,'/record_start_new')">기록</button>
					</div>
					<div class="each_record">
						<p>외출</p>
						<button type="button" class="record_btn outing_btn" onclick="no_record_Time({{:list.id}},this,'/record_out_new')">기록</button>
					</div>
					<div class="each_record">
						<p>복귀</p>
						<button type="button" class="record_btn comeback_btn" onclick="no_record_Time({{:list.id}},this,'/record_back_new')">기록</button>
					</div>
					<div class="each_record">
						<p>퇴근</p>
						<button type="button" class="record_btn end_btn" onclick="no_record_Time({{:list.id}},this,'/record_end_new')">기록</button>
					</div>
				</div>
			</div>
            {{/if}}

			</div>
		</div>
    </script>
</body>
</html>